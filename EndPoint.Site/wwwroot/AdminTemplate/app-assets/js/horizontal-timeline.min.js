!function(e,t,n){"use strict";n(t).ready(function(n){function i(e,t,n){var i=c(e.eventsWrapper),r=Number(e.timelineWrapper.css("width").replace("px",""));"next"==n?l(e,i-r+C,r-t):l(e,i+r-C)}function r(e,t,n){var i=e.eventsContent.find(".selected");if(("next"==n?i.next():i.prev()).length>0){var r=e.eventsWrapper.find(".selected"),l="next"==n?r.parent("li").next("li").children("a"):r.parent("li").prev("li").children("a");s(l,e.fillingLine,t),f(l,e.eventsContent),l.addClass("selected"),r.removeClass("selected"),v(l),a(n,l,e)}}function a(t,n,i){var r=e.getComputedStyle(n.get(0),null),a=Number(r.getPropertyValue("left").replace("px","")),s=Number(i.timelineWrapper.css("width").replace("px","")),o=Number(i.eventsWrapper.css("width").replace("px","")),p=c(i.eventsWrapper);("next"==t&&a>s-p||"prev"==t&&a<-p)&&l(i,s/2-a,s-o)}function l(e,t,n){var i=e.eventsWrapper.get(0);t=t>0?0:t,t=void 0!==n&&t<n?n:t,d(i,"translateX",t+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==n?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function s(t,n,i){var r=e.getComputedStyle(t.get(0),null),a=r.getPropertyValue("left"),l=r.getPropertyValue("width");a=Number(a.replace("px",""))+Number(l.replace("px",""))/2;var s=a/i;d(n.get(0),"scaleX",s)}function o(e,t){for(var n=0;n<e.timelineDates.length;n++){var i=m(e.timelineDates[0],e.timelineDates[n]),r=Math.round(i/e.eventsMinLapse)+2;e.timelineEvents.eq(n).css("left",r*t+"px")}}function p(e,t){var n=m(e.timelineDates[0],e.timelineDates[e.timelineDates.length-1]),i=n/e.eventsMinLapse,i=Math.round(i)+4,r=i*t;return e.eventsWrapper.css("width",r+"px"),s(e.eventsWrapper.find("a.selected"),e.fillingLine,r),a("next",e.eventsWrapper.find("a.selected"),e),r}function f(e,t){var n=e.data("date"),i=t.find(".selected"),r=t.find('[data-date="'+n+'"]'),a=r.height();if(r.index()>i.index())var l="selected enter-right",s="leave-left";else var l="selected enter-left",s="leave-right";r.attr("class",l),i.attr("class",s).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){i.removeClass("leave-right leave-left"),r.removeClass("enter-left enter-right")}),t.css("height",a+"px")}function v(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function c(t){var n=e.getComputedStyle(t.get(0),null),i=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");if(i.indexOf("(")>=0){var i=i.split("(")[1];i=i.split(")")[0],i=i.split(",");var r=i[4]}else var r=0;return Number(r)}function d(e,t,n){e.style["-webkit-transform"]=t+"("+n+")",e.style["-moz-transform"]=t+"("+n+")",e.style["-ms-transform"]=t+"("+n+")",e.style["-o-transform"]=t+"("+n+")",e.style.transform=t+"("+n+")"}function u(e){var t=[];return e.each(function(){var e=n(this),i=e.data("date").split("T");if(i.length>1)var r=i[0].split("/"),a=i[1].split(":");else if(i[0].indexOf(":")>=0)var r=["2000","0","0"],a=i[0].split(":");else var r=i[0].split("/"),a=["0","0"];var l=new Date(r[2],r[1]-1,r[0],a[0],a[1]);t.push(l)}),t}function m(e,t){return Math.round(t-e)}function g(e){for(var t=[],n=1;n<e.length;n++){var i=m(e[n-1],e[n]);t.push(i)}return Math.min.apply(null,t)}function h(t){for(var n=t.offsetTop,i=t.offsetLeft,r=t.offsetWidth,a=t.offsetHeight;t.offsetParent;)t=t.offsetParent,n+=t.offsetTop,i+=t.offsetLeft;return n<e.pageYOffset+e.innerHeight&&i<e.pageXOffset+e.innerWidth&&n+a>e.pageYOffset&&i+r>e.pageXOffset}function x(){return e.getComputedStyle(t.querySelector(".cd-horizontal-timeline"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}var y=n(".cd-horizontal-timeline"),C=60;y.length>0&&function(e){e.each(function(){var e=n(this),a={};a.timelineWrapper=e.find(".events-wrapper"),a.eventsWrapper=a.timelineWrapper.children(".events"),a.fillingLine=a.eventsWrapper.children(".filling-line"),a.timelineEvents=a.eventsWrapper.find("a"),a.timelineDates=u(a.timelineEvents),a.eventsMinLapse=g(a.timelineDates),a.timelineNavigation=e.find(".cd-timeline-navigation"),a.eventsContent=e.children(".events-content"),o(a,C);var l=p(a,C);e.addClass("loaded"),a.timelineNavigation.on("click",".next",function(e){e.preventDefault(),i(a,l,"next")}),a.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),i(a,l,"prev")}),a.eventsWrapper.on("click","a",function(e){e.preventDefault(),a.timelineEvents.removeClass("selected"),n(this).addClass("selected"),v(n(this)),s(n(this),a.fillingLine,l),f(n(this),a.eventsContent)}),a.eventsContent.on("swipeleft",function(){"mobile"==x()&&r(a,l,"next")}),a.eventsContent.on("swiperight",function(){"mobile"==x()&&r(a,l,"prev")}),n(t).keyup(function(t){"37"==t.which&&h(e.get(0))?r(a,l,"prev"):"39"==t.which&&h(e.get(0))&&r(a,l,"next")})})}(y)})}(window,document,jQuery);